###############################################
# Stream: <%=@db_stream.name%>
# Path:   <%=@db_stream.path%>
# Source: <%=@nilm.name%> <%unless @nilm.description.blank?%>(<%=@nilm.description%>)<%end%>
#
#
# start:             <%=Time.at(@legend[:start_time]/1e6)%>
# end:               <%=Time.at(@legend[:end_time]/1e6)%>
# total time:        <%=distance_of_time_in_words(@legend[:end_time]/1e6-@legend[:start_time]/1e6)%>
# total rows:        <%=@legend[:num_rows]%>
# decimation factor: <%=@legend[:decimation_factor]%>
#
# this file can be loaded directly into MATLAB
#
# 	dataset = importdata('thisfilename.csv')
#
# dataset.textdata: this help text
# dataset.data:     the data
#
# raw data can be accessed using nilmtool, run:
# nilmtool -u <%=@db.url%> extract -s @<%=@legend[:start_time]%> -e @<%=@legend[:end_time]%> <%=@db_stream.path%>
#
# <%=@legend[:notes]%>
#  ----------- LEGEND ---------------
<%@legend[:columns].each do |col|%>
# Column <%=col[:index]%>: <%=col[:name]%> (<%=col[:units]%>)
<%end%>
# -----------------------------------
#
<% @data.each do |row|%>
<%= row.join(", ")%>
<%end%>
